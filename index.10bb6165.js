function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){var t=e.text,n=e.type,r=void 0===n?"error":n,a=e.warning,o=void 0===a?"":a,c=document.createElement("div"),l=document.createElement("h1"),u=document.createElement("p");l.style.textTransform="capitalize",c.setAttribute("class","notification ".concat(r)),c.setAttribute("data-qa","notification"),l.textContent=o||r,u.textContent=t,o&&(c.style.backgroundColor="rgba(255, 212, 39, 0.3)"),c.append(l),c.append(u),document.body.append(c),setTimeout(function(){c.remove()},2e3)}function r(){var e=y.querySelector(".cell-input"),t=function(e){var t="warning";if(f.includes("$")&&(0==+e.replace(/\D/g,"")||!e))return n({text:"Please, enter a salary",type:t}),null;if(!f.includes("$")&&(e<18||e>90))return n({text:"Age must be between 18 and 90",type:t}),null;if(f.includes("$")){var r=+e.replace(/\D/g,"");return"$".concat(r.toLocaleString("en"))}return e}(e.value);switch(t){case null:document.querySelector(".cell-input").focus();break;case t:e.parentElement.textContent=t,e.remove(),p=""}}function a(e){i.forEach(function(t){var n=document.createElement("option");n.textContent="".concat(t),n.setAttribute("value","".concat(t)),t===f&&n.setAttribute("selected","selected"),e.append(n)})}function o(){var e=document.getElementsByName("edit-city")[0];e.parentElement.textContent=e.value,e.remove(),p=""}var c,l,u=t(document.querySelector("thead").querySelectorAll("th")),s=document.createElement("button"),i=(c=t(document.querySelector("tbody").rows),t(new Set(c.map(function(e){return e.cells[2].textContent})))),m="",d=!1,y=null,p="",f="";document.body.append(((l=document.createElement("form")).setAttribute("class","new-employee-form"),u.forEach(function(e){var t=e.textContent,n=document.createElement("label");if(n.textContent="".concat(t,":"),"Office"===t){var r=document.createElement("select");r.setAttribute("data-qa","".concat(t).toLowerCase()),a(r),r.setAttribute("name","".concat(t).toLowerCase()),n.append(r)}else{var o=document.createElement("input"),c="Age"===t||"Salary"===t?"number":"text";o.setAttribute("name","".concat(t).toLowerCase()),o.setAttribute("type","".concat(c)),o.setAttribute("data-qa","".concat(t).toLowerCase()),n.append(o)}l.append(n)}),s.setAttribute("type","submit"),s.textContent="Save to table",l.append(s),l)),addEventListener("click",function(e){e.preventDefault();var a,c,l,i=e.target.parentElement,f=t(document.querySelector("tbody").rows);if(u.includes(e.target)){var g,b=u.findIndex(function(t){return t===e.target}),v=e.target.textContent,E=((g=t(f)).sort(function(e,t){var n=e.cells[b].textContent,r=t.cells[b].textContent;return"Salary"===v?+n.replace(/\D/g,"")-+r.replace(/\D/g,""):n.localeCompare(r)}),m!==v||d?(d=!1,m=v):(d=!0,g.reverse()),g),x=document.querySelector("tbody"),A=document.createElement("tbody");E.forEach(function(e){return A.append(e)}),x.replaceWith(A)}(y&&y!==i&&f.includes(i)||y&&!f.includes(i)&&i.parentElement!==document.querySelector("thead"))&&y.removeAttribute("class"),f.includes(i)&&!p&&(i.setAttribute("class","active"),y=i),e.target===s&&(n(l=function(e){var t=e.nameValue,n=e.position,r=e.age,a=e.salary;switch(!0){case!t:return document.getElementsByName("name")[0].focus(),{text:"Please, enter a name"};case t.length>0&&t.length<4:return document.getElementsByName("name")[0].focus(),{text:"Name has less than 4 letters",warning:"warning"};case!n:return document.getElementsByName("position")[0].focus(),{text:"Please, enter position"};case!r:return document.getElementsByName("age")[0].focus(),{text:"Please, enter age"};case r<18||r>90:return document.getElementsByName("age")[0].focus(),{text:"Age must be between 18 and 90",warning:"warning"};case!a:return document.getElementsByName("salary")[0].focus(),{text:"Please, enter the amount of salary"};default:return{text:"Employee successfully added",type:"success"}}}(c={nameValue:t(document.getElementsByName("name"))[0].value.trim(),position:t(document.getElementsByName("position"))[0].value,city:t(document.getElementsByName("office"))[0].value,age:+t(document.getElementsByName("age"))[0].value,salary:+t(document.getElementsByName("salary"))[0].value})),"success"===l.type&&(document.querySelector("tbody").append((a=document.createElement("tr"),Object.keys(c).forEach(function(e){var t=document.createElement("td");t.textContent="salary"===e?"$".concat(c[e].toLocaleString("en")):c[e],a.append(t)}),a)),document.querySelector(".new-employee-form").reset())),p&&"city"!==p&&y&&i!==y&&r(),"city"===p&&y&&i.parentElement!==y&&o()}),addEventListener("dblclick",function(e){if(t(document.querySelector("tbody").rows).includes(e.target.parentElement)){var n,r=e.target,o=r.parentElement.querySelectorAll("td")[2];if(y.removeAttribute("class"),f=e.target.textContent,r===o){p="city",r.textContent="",(n=document.createElement("select")).setAttribute("name","edit-city"),n.style.width="150px",n.style.boxSizing="border-box",n.style.border="1px solid #808080",n.style.borderRadius="4px",n.style.color="#808080",n.style.padding="4px",n.style.outlineColor="#808080",a(n),r.append(n);return}var c=document.createElement("input");c.setAttribute("class","cell-input"),c.value=f,e.target.textContent="",e.target.append(c),y=e.target,c.focus(),p="other"}}),addEventListener("keydown",function(e){if("Enter"===e.key&&"other"===p&&r(),"Escape"===e.key&&"other"===p){var t=y.querySelector(".cell-input");t.parentElement.textContent=f,t.remove(),p=""}"Escape"===e.key&&"city"===p&&o()}),addEventListener("change",function(){i.includes(f)&&o()});
//# sourceMappingURL=index.10bb6165.js.map
